{% extends "PumAppBundle::layout.html.twig" %}

{% set menu_active = menu_active|default('homepage') %}
{% set app_active  = 'projectadmin' %}

{% set pum_menu = {
    'homepage': {
        'color': 'nephritis',
        'icon': 'meter3',
        'title': 'common.dashboard.leftnav'|trans({}, 'pum'),
        'path': 'pa_homepage'
    }
} %}

{% for beam in pum_project().beams %}
    {% if is_granted('PUM_OBJ_VIEW', {project: pum_projectName(), beam: beam.name}) %}
        {% set pum_menu = pum_menu|merge({(beam.name): {
            color: beam.color,
            icon:  beam.icon,
            title: beam.name,
            url:   path('pa_beam_show', {beamName: beam.name})
        }}) %}
    {% endif %}
{% endfor %}

{% if is_granted('ROLE_PA_CUSTOM_VIEWS') %}
    {% set pum_menu = pum_menu|merge({('custom_view'): {
        color: 'silver',
        icon:  'eye2',
        title: 'common.custom.view.leftnav'|trans({}, 'pum'),
        url:   path('pa_custom_view_index')
    }}) %}
{% endif %}

{% if is_granted('ROLE_PA_VARS') %}
    {% set pum_menu = pum_menu|merge({('vars'): {
        color: 'silver',
        icon:  'settings',
        title: 'common.vars.leftnav'|trans({}, 'pum'),
        url:   path('pa_vars_index')
    }}) %}
{% endif %}
