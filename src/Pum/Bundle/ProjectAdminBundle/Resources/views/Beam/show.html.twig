{% extends "PumProjectAdminBundle::layout-beam.html.twig" %}

{% block subsidebar '' %}

{% set block_content_pumcore_class = 'pum-core-jumbotron' %}

{% block content %}
    <div class="jumbotron jumbotron-hero jumbotron-fx-10 pum-scheme-jumbotron">
        <h1>
            <span><i class="pumicon pumicon-{{ beam.icon }}"></i></span>
            <span>{{ beam.name|pum_ucfirst }}</span>
        </h1>
        <hr />
        {% set objs = {} %}
        {% set objs_path = {} %}
        {% for obj in beam.objects %}
            {% set objs = objs|merge([obj.name]) %}
            {% set objs_path = objs_path|merge([path('pa_object_list', {beamName: beam.name, name: obj.name})]) %}
        {% endfor %}

        {% for obj_key, obj_name in objs|sort %}
            {% if (is_granted('PUM_OBJ_VIEW', {project: pum_projectName(), beam: beam.name, object: obj_name})) %}
                {{ (loop.first) ? '<ul class="list-inline">' }}

                {% set first_letter = obj_name[:1] %}

                {% if (last_first_letter|default(null) != first_letter) %}
                    {% set last_first_letter = first_letter %}
                    {% if loop.first != true %}
                        </ul></li>
                    {% endif %}
                    <li class="list-divider"><ul class="list-inline">
                {% endif %}
                <li>
                    <a href="{{ objs_path[obj_key] }}" data-hover="{{ obj_name|humanize }}">
                        <span data-hover="{{ obj_name|humanize }}">{{ obj_name|humanize }}</span>
                    </a>
                </li>

                {{ (loop.last) ? '</ul>' }}
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}
